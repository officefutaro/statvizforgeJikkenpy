# UIテスト指示ファイル

このファイルには、ユーザーインターフェース（UI）に関するテスト指示を記載します。

⚠️ **重要**: UIテストは他のテスト（API統合テスト、バックエンドテスト、単体テストなど）がすべて完了した後、**最後に実行**してください。

テスト実行時に漏れがないよう、必ずこのファイルを参照してください。

---

## 🔄 処理待ちUIテスト指示

### UIテスト指示 #2: ファイルの表表示 🔄

**テスト名**: アパートの家賃プロジェクトでのファイル表表示機能  
**対象画面**: プロジェクト詳細画面・ファイルエクスプローラー・テーブルビューアー  
**テストカテゴリ**: ファイル操作 + データ表示 + UI表示確認 + **フロントエンド統合**

#### 前提条件
- "アパートの家賃" プロジェクトが存在する
- プロジェクト内に "アパートの家賃.csv" ファイルが存在する
- フロントエンドサーバーが起動している
- **実際のブラウザでテストを実行すること**

#### テスト手順
1. **🌐 ブラウザで http://localhost:3000 を開く**
2. **❗ プロジェクト一覧の読み込み状況を確認**
   - エラーメッセージ（404、Failed to fetch等）がないかチェック
   - ローディング表示が適切に動作するかチェック
3. プロジェクト一覧から "アパートの家賃" プロジェクトを**クリック**して開く
4. プロジェクトのタブが正しく表示されていることを検査
5. ファイルエクスプローラーで "アパートの家賃.csv" ファイルを**クリック**して選択
6. ファイル詳細情報でデータ種類が以下であることを確認：
   - 分析データ
   - 項目データ
7. この種類でなければ表は開けないことを確認（エラーハンドリング）
8. 「表で開く」ボタンを**クリック**して実行
9. 表が正しく開いたことを確認
10. **🔍 ブラウザの開発者ツールでネットワークタブを確認**
    - APIリクエストが正常に送信されているか
    - 404エラーやその他のエラーがないか

#### 期待結果
- ✅ **プロジェクト一覧が404エラーなしで読み込まれる**
- ✅ **「Failed to fetch」エラーメッセージが表示されない**
- ✅ プロジェクトタブが正確に表示される
- ✅ ファイル選択が正常に動作する
- ✅ データ種類が正しく判定・表示される（分析データ + 項目データ）
- ✅ 不適切なデータ種類の場合はエラーメッセージが表示される
- ✅ 「表で開く」ボタンが適切に動作する
- ✅ テーブルビューアーでCSVデータが正しく表示される
- ✅ テーブル内のデータが読み取り可能な形式で表示される
- ✅ **ブラウザ開発者ツールのNetworkタブでAPIエラーがない**

#### 検証項目
- [ ] **🚨 プロジェクト一覧API接続エラーの有無**
- [ ] **🚨 404エラーメッセージの表示有無**
- [ ] **🚨 ブラウザコンソールエラーの有無**
- [ ] プロジェクトタブの表示内容（プロジェクト名、アイコンなど）
- [ ] ファイル選択時のUI状態変化
- [ ] データ種類判定の正確性
- [ ] データ種類表示のUI
- [ ] エラーメッセージの適切性
- [ ] 「表で開く」ボタンの有効/無効状態
- [ ] テーブル表示の正確性（ヘッダー、データ行）
- [ ] テーブルのスクロール・表示機能

#### 使用ツール
- Jest + Testing Library（単体テスト）
- Playwright（E2Eテスト）
- UserInteractionTestHelper

#### 追加要件（UI固有）
- レスポンシブデザイン対応確認（テーブル表示の横スクロール）
- アクセシビリティ対応確認（キーボードナビゲーション）
- エラー状態での適切なフィードバック
- ローディング状態の表示確認

**優先度**: 高  
**実装期限**: -  
**ステータス**: 🔄 処理待ち

### UIテスト指示 #3: APIプロキシ統合テスト 🔄

**テスト名**: フロントエンド↔バックエンド API通信の統合確認  
**対象画面**: 全画面（プロジェクト一覧、ファイル操作等）  
**テストカテゴリ**: **フロントエンド統合 + APIプロキシ**

#### 前提条件
- フロントエンドサーバーが起動している（Port 3000）
- バックエンドサーバーが起動している（Port 8000）
- **実際のブラウザでテストを実行すること**

#### テスト手順
1. **🌐 ブラウザで http://localhost:3000 を開く**
2. **🔍 開発者ツール（F12）を開き、Networkタブを表示**
3. **🔄 ページをリロード（Ctrl+F5）**
4. **📊 プロジェクト一覧の読み込みを確認**
   - API リクエスト `/api/projects` の送信確認
   - レスポンスステータスが 200 OK であることを確認
   - エラーメッセージが表示されないことを確認
5. **📁 プロジェクトをクリックしてファイル一覧を表示**
   - ファイルツリーAPI の正常動作確認
6. **🏷️ ファイルを選択してタグ情報を表示**
   - ファイルタグAPI の正常動作確認

#### 期待結果
- ✅ **Networkタブで全APIリクエストが 200 OK**
- ✅ **404 エラーが発生しない**
- ✅ **「Failed to fetch」エラーメッセージが表示されない**
- ✅ **プロキシが正しく `/api/v1/` エンドポイントに転送**
- ✅ **データが正常に画面に表示される**

#### 検証項目
- [ ] **🚨 `/api/projects` → `/api/v1/projects/` プロキシ動作**
- [ ] **🚨 `/api/files/*` → `/api/v1/files/*` プロキシ動作**  
- [ ] **🚨 APIレスポンス時間が適切（< 2秒）**
- [ ] **🚨 ブラウザコンソールにJavaScriptエラーがない**
- [ ] **🚨 ネットワークエラーが発生しない**

#### 使用ツール
- **ブラウザ開発者ツール（必須）**
- Playwright（E2Eテスト）
- 手動確認

**優先度**: 最高  
**実装期限**: 即時  
**ステータス**: 🔄 処理待ち

---

## ✅ 完了済みUIテスト指示

⚠️ **重要**: 完了済みテストも毎回実行して動作確認を行ってください。

### UIテスト指示 #1: プロジェクト削除機能テスト ✅

**テスト名**: 特定プロジェクト以外の削除機能  
**対象画面**: プロジェクト一覧画面  
**テストカテゴリ**: ユーザーインタラクション + データ操作  
**完了日**: 2025年8月1日  
**生成ファイル**: `/app/frontend/src/tests/project-deletion-specific.test.tsx`

#### 前提条件
- プロジェクト一覧画面が表示されている
- 以下のプロジェクトが存在する：
  - "アパートの家賃" （保持対象）
  - "テストのためのプロジェクト" （保持対象）
  - その他の複数プロジェクト （削除対象）

#### テスト手順
1. プロジェクト一覧を表示
2. "アパートの家賃"と"テストのためのプロジェクト"以外のプロジェクトを特定
3. 削除対象プロジェクトの削除ボタンをクリック
4. 削除確認ダイアログで「OK」をクリック
5. 削除完了を待機
6. 残りのプロジェクトが"アパートの家賃"と"テストのためのプロジェクト"のみであることを確認

#### 期待結果
- ✅ 指定した2つのプロジェクトのみが残存
- ✅ 削除されたプロジェクトは一覧から消える
- ✅ 削除完了メッセージが表示される
- ✅ trash フォルダにアーカイブが作成される

#### 検証項目
- [x] プロジェクト数が2になる
- [x] 残存プロジェクト名が正確に一致
- [x] 削除ログが記録される
- [x] UI状態が適切に更新される

#### 使用ツール
- Jest + Testing Library（単体テスト）
- Playwright（E2Eテスト）
- UserInteractionTestHelper

#### 追加要件
- アクセシビリティ対応確認
- エラーハンドリング（削除失敗時）
- パフォーマンス確認（大量削除時）

#### 実装済み機能
- ✅ モックプロジェクトデータ（5プロジェクト）
- ✅ 削除対象特定と削除実行
- ✅ API呼び出しとレスポンス処理
- ✅ UI状態更新（プロジェクト数、リスト表示）
- ✅ エラーハンドリング（ネットワークエラー、サーバーエラー）
- ✅ 削除キャンセル機能
- ✅ ローディング状態表示
- ✅ アクセシビリティテスト（キーボードナビゲーション）
- ✅ パフォーマンステスト（大量データ対応）

**優先度**: 高  
**実装期限**: -  
**ステータス**: ✅ 完了

---

## 📝 UIテスト指示テンプレート

新しいUIテスト指示を追加する際は、以下のテンプレートを使用してください：

```markdown
### UIテスト指示 #X: [テスト名]

**テスト名**: [具体的なテスト名]  
**対象画面/コンポーネント**: [対象]  
**テストカテゴリ**: [ユーザーインタラクション/画面遷移/フォーム操作など]

#### 前提条件
- [テスト実行前の状態]

#### テスト手順
1. [具体的な操作手順]
2. [...]

#### 期待結果
- ✅ [期待される動作1]
- ✅ [期待される動作2]

#### 検証項目
- [ ] [確認すべき項目1]
- [ ] [確認すべき項目2]

#### 使用ツール
- [Jest + Testing Library / Playwright など]

#### 追加要件（UI固有）
- レスポンシブデザイン対応確認
- アクセシビリティ対応確認
- ブラウザ間互換性確認
- タッチデバイス対応確認

**優先度**: [高/中/低]  
**実装期限**: [日付]  
**ステータス**: 🔄 処理待ち
```

---

## 📋 UIテスト固有の指示パターン

### パターン1: フォーム操作テスト
```markdown
[フォーム名]での入力・送信・バリデーション機能をテストしてください。
- 入力フィールドの動作確認
- リアルタイムバリデーション
- 送信成功/失敗時のUI変化
- エラーメッセージの表示・非表示
```

### パターン2: モーダル・ダイアログテスト
```markdown
[モーダル名]の表示・操作・クローズ機能をテストしてください。
- 開く操作（ボタンクリック、キーボードなど）
- モーダル内での操作（フォーム入力、ボタンクリックなど）
- 閉じる操作（×ボタン、ESCキー、背景クリック）
- フォーカス管理（モーダル内トラップ、復帰）
```

### パターン3: テーブル・リスト操作テスト
```markdown
[テーブル/リスト名]での表示・操作機能をテストしてください。
- データ表示（ローディング、空状態含む）
- ソート機能（昇順/降順、複数列）
- フィルター・検索機能
- ページネーション
- 行選択・一括操作
- 行の追加・編集・削除
```

### パターン4: ナビゲーション・遷移テスト
```markdown
[画面間/タブ間]の遷移機能をテストしてください。
- 遷移トリガー（クリック、キーボード、自動遷移）
- 遷移アニメーション・ローディング表示
- 遷移先の正確性
- 戻る操作（ブラウザバック、戻るボタン）
- 状態の保持・復元
```

### パターン5: レスポンシブ・デバイス対応テスト
```markdown
[コンポーネント/画面]のレスポンシブ対応をテストしてください。
- デスクトップ表示（1920x1080）
- タブレット表示（768x1024）
- モバイル表示（375x667）
- 横向き表示での動作
- タッチ操作（タップ、スワイプ、ピンチ）
```

---

## 🚀 UIテスト実行時の注意事項

### テスト実行前の確認
⚠️ **重要**: UIテストは他のテスト（API、バックエンド、単体テストなど）がすべて完了した後、最後に実行してください。

1. **他のテストを先に完了**: API統合テスト、バックエンドテスト、単体テストなどを先に実行
2. **このファイル（ui-test-instructions.md）を必ず確認**
3. **完了済みテストも含めて全UIテストを実行**（回帰テスト）
4. フロントエンドサーバーが起動していることを確認
5. 必要なテストデータが準備されていることを確認
6. ブラウザの開発者ツールでコンソールエラーがないことを確認

### テスト実行時の重要ポイント
- **実行順序**: 他のテスト完了後、最後にUIテストを実行
- **全テスト実行**: 新規テスト + 完了済みテストの両方を実行
- **視覚的確認**: スクリーンショット付きでテスト結果を記録
- **操作性確認**: 実際のユーザー操作をシミュレート
- **エラーハンドリング**: 異常系も含めて包括的にテスト
- **パフォーマンス**: 応答時間、描画速度も測定
- **回帰テスト**: 既存機能が壊れていないことを確認

### テスト完了後
- テスト結果をスクリーンショット付きで記録
- 発見したUIの問題点をissueとして記録
- 必要に応じて改善提案を作成

---

## 📊 UIテスト進捗管理

- 🔄 処理待ち: 2件
- ✅ 完了: 1件  
- 📝 下書き: 0件

**最終更新**: 2025年8月1日

---

## 🔗 関連ファイル

- [test-instructions.md](./test-instructions.md) - 全般的なテスト指示
- [test-instruction-examples.md](./app/frontend/src/tests/test-instruction-examples.md) - テスト指示の実例集
- [user-interaction-testing.md](./user-interaction-testing.md) - ユーザーインタラクションテストガイド